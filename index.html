<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>G·ª≠i Th√¥ng B√°o</title>
  </head>
  <body>
    <h1>Demo Th√¥ng B√°o ƒê·∫©y</h1>
    <button id="enableNotifications">B·∫≠t Th√¥ng B√°o</button>

    <script>
      // Ki·ªÉm tra n·∫øu tr√¨nh duy·ªát h·ªó tr·ª£ Service Workers v√† Notification
      if ("serviceWorker" in navigator && "Notification" in window) {
        navigator.serviceWorker
          .register("service-worker.js")
          .then((reg) => console.log("Service Worker ƒëƒÉng k√Ω th√†nh c√¥ng!", reg))
          .catch((err) =>
            console.error("Service Worker ƒëƒÉng k√Ω th·∫•t b·∫°i:", err)
          );
      }

      const enableNotificationsBtn = document.getElementById(
        "enableNotifications"
      );
      enableNotificationsBtn.addEventListener("click", () => {
        Notification.requestPermission().then((permission) => {
          if (permission === "granted") {
            alert("Th√¥ng b√°o ƒë√£ ƒë∆∞·ª£c b·∫≠t!");
            scheduleNotification();
          } else {
            alert("B·∫°n ƒë√£ t·ª´ ch·ªëi quy·ªÅn th√¥ng b√°o!");
          }
        });
      });

      // L√™n l·ªãch g·ª≠i th√¥ng b√°o sau 5 gi√¢y
      function scheduleNotification() {
        navigator.serviceWorker.ready.then((registration) => {
          setTimeout(() => {
            registration.showNotification("üîî Th√¥ng B√°o Nh·∫Øc Nh·ªü", {
              body: "B·∫°n ƒë√£ l√¢u ch∆∞a quay l·∫°i trang web!",
              icon: "icon.png", // ƒê∆∞·ªùng d·∫´n t·ªõi icon
              vibrate: [200, 100, 200], // Rung khi th√¥ng b√°o (tr√™n ƒëi·ªán tho·∫°i)
              tag: "reminder-notification",
            });
          }, 5000); // G·ª≠i th√¥ng b√°o sau 5 gi√¢y
        });
      }
    </script>
  </body>
</html>
